<menu id="site-nav-menu" class="flyout-menu">
  {{ $currentPage := . }}
  {{ range .Site.Menus.main }}
    {{ if .HasChildren }}
    <div class="dropdown">
      <a class="dropbtn" onclick='showMenu("{{ .Identifier }}")'>
        {{ with .Pre }}{{ . }} {{ end }}
        {{ .Name }}
        <i class="fa fa-caret-down"></i>
      </a>
      <div class="dropdown-content" id="{{ .Identifier }}">
        <ul>
        {{ range .Children }}
          <li>
            <a href="{{ .URL | relLangURL }}" class="link">
              {{ with .Pre }}{{ . }} {{ end }}{{ .Name }}
            </a>
          </li>
          {{ if .HasChildren }}
            <ul>
              {{ range .Children }}
                <li>
                  <a href="{{ .URL | relLangURL }}" class="link">
                    - {{ with .Pre }}{{ . }} {{ end }}{{ .Name }}
                  </a>
                </li>
              {{ end }}
            </ul>
          {{ end }}
        {{ end }}
       </ul>
      </div>
    </div>
    {{ else }}
      <a href="{{ .URL | relLangURL }}" class="link">
        {{ with .Pre }}{{ . }} {{ end }}{{ .Name }}
      </a>
    {{ end }}
  {{ end }}
  {{ if .Site.Params.header.shareMenu }}
    <a href="#share-menu" class="share-toggle">
      <i class="fas fa-share-alt">&nbsp;</i>
      Share
    </a
  >{{ end }}
  {{ if .Site.Params.header.searchMenu }}
    {{ partial "search-menu" . }}
  {{ end }}
</menu>

<script>
  /* When the user clicks on the button, 
  toggle between hiding and showing the dropdown content */
  function showMenu(menuName) {
    document.getElementById(menuName).classList.toggle("show");
  }
  
  // Close the dropdown if the user clicks outside of it
  // window.onclick = function(e) {
  //   if (!e.target.matches('.dropbtn')) {
  //   var myDropdown = document.getElementById(menuName);
  //     if (myDropdown.classList.contains('show')) {
  //       myDropdown.classList.remove('show');
  //     }
  //   }
  // }
  </script>
